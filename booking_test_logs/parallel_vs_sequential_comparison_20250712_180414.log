2025-07-12 18:04:14,727 - INFO - Starting parallel vs sequential comparison test - Log file: booking_test_logs\parallel_vs_sequential_comparison_20250712_180414.log
2025-07-12 18:04:14,728 - INFO - === PARALLEL VS SEQUENTIAL ENDPOINT COMPARISON ===
2025-07-12 18:04:14,729 - INFO - Webhook API: http://localhost:8000
2025-07-12 18:04:14,729 - INFO - Test phone number: 0478621276
2025-07-12 18:04:14,730 - INFO - 
============================================================
2025-07-12 18:04:14,730 - INFO - SETTING UP TEST DATA
2025-07-12 18:04:14,733 - INFO - ============================================================
2025-07-12 18:04:14,733 - INFO - Making request to location-resolver
2025-07-12 18:04:14,734 - INFO - Endpoint: /location-resolver
2025-07-12 18:04:14,734 - INFO - Payload: {
  "locationQuery": "Location 2",
  "sessionId": "test_comparison_123",
  "dialedNumber": "0478621276",
  "callerPhone": "0412345678"
}
2025-07-12 18:04:16,950 - INFO - Status: 200
2025-07-12 18:04:16,951 - INFO - Duration: 2.21s
2025-07-12 18:04:16,952 - INFO - Response: {"success":true,"sessionId":"test_comparison_123","message":"I'll book you at Location 2","resolved":true,"needs_clarification":false,"options":null,"confidence":1.0,"selected_location":{"id":"1709781060880966929","name":"Location 2"}}...
2025-07-12 18:04:16,954 - INFO - Making request to get-location-practitioners
2025-07-12 18:04:16,955 - INFO - Endpoint: /get-location-practitioners
2025-07-12 18:04:16,956 - INFO - Payload: {
  "business_id": "1717010852512540252",
  "businessName": "City Clinic",
  "dialedNumber": "0478621276",
  "sessionId": "test_comparison_123"
}
2025-07-12 18:04:30,538 - INFO - Status: 200
2025-07-12 18:04:30,540 - INFO - Duration: 13.58s
2025-07-12 18:04:30,542 - INFO - Response: {"success":false,"message":"I couldn't find any practitioners with availability at that location on the requested date.","sessionId":"test_comparison_123"}...
2025-07-12 18:04:30,547 - INFO - Making request to get-practitioner-services
2025-07-12 18:04:30,549 - INFO - Endpoint: /get-practitioner-services
2025-07-12 18:04:30,550 - INFO - Payload: {
  "practitioner": "Brendan Smith",
  "dialedNumber": "0478621276",
  "sessionId": "test_comparison_123"
}
2025-07-12 18:04:32,754 - INFO - Status: 200
2025-07-12 18:04:32,755 - INFO - Duration: 2.20s
2025-07-12 18:04:32,759 - INFO - Response: {"success":true,"message":"Brendan Smith offers Acupuncture (Follow up), Acupuncture (Initial), and Massage.","practitioner":"Brendan Smith","services":[{"appointment_type_id":"1702104670815659451","service_name":"Acupuncture (Follow up)","duration_minutes":60},{"appointment_type_id":"1701928805083391378","service_name":"Acupuncture (Initial)","duration_minutes":60},{"appointment_type_id":"1702104852236084669","service_name":"Massage","duration_minutes":60}],"businessFiltered":false}...
2025-07-12 18:04:32,762 - INFO - Using test data:
2025-07-12 18:04:32,766 - INFO -   Location: City Clinic (1717010852512540252)
2025-07-12 18:04:32,768 - INFO -   Practitioner: Brendan Smith
2025-07-12 18:04:32,770 - INFO -   Service: Acupuncture (Follow up)
2025-07-12 18:04:32,771 - INFO -   Date: 2025-07-13
2025-07-12 18:04:32,772 - INFO - 
============================================================
2025-07-12 18:04:32,773 - INFO - RUNNING COMPARISON TESTS
2025-07-12 18:04:32,779 - INFO - ============================================================
2025-07-12 18:04:32,781 - INFO - 
============================================================
2025-07-12 18:04:32,783 - INFO - TESTING: find-next-available vs enhanced/find-next-available
2025-07-12 18:04:32,784 - INFO - ============================================================
2025-07-12 18:04:32,786 - INFO - Making request to find-next-available (sequential)
2025-07-12 18:04:32,787 - INFO - Endpoint: /find-next-available
2025-07-12 18:04:32,788 - INFO - Payload: {
  "sessionId": "test_comparison_123",
  "dialedNumber": "0478621276",
  "maxDays": 14,
  "practitioner": "Brendan Smith",
  "service": "Acupuncture (Follow up)",
  "locationId": "1717010852512540252",
  "locationName": "City Clinic"
}
2025-07-12 18:04:47,776 - INFO - Status: 200
2025-07-12 18:04:47,777 - INFO - Duration: 14.99s
2025-07-12 18:04:47,778 - INFO - Response: {"success":true,"found":true,"message":"Brendan Smith's next availability for Acupuncture (Follow up) is Sunday, July 13 at 9:00 AM at City Clinic and Sunday, July 13 at 10:00 AM at City Clinic.","slots":["Sunday, July 13 at 9:00 AM at City Clinic","Sunday, July 13 at 10:00 AM at City Clinic"],"available_times":["Sunday, July 13 at 9:00 AM at City Clinic","Sunday, July 13 at 10:00 AM at City Clinic"],"sessionId":"test_comparison_123"}...
2025-07-12 18:04:47,781 - INFO - Making request to enhanced/find-next-available (parallel)
2025-07-12 18:04:47,782 - INFO - Endpoint: /enhanced/find-next-available
2025-07-12 18:04:47,784 - INFO - Payload: {
  "sessionId": "test_comparison_123",
  "dialedNumber": "0478621276",
  "maxDays": 14,
  "practitioner": "Brendan Smith",
  "service": "Acupuncture (Follow up)",
  "locationId": "1717010852512540252",
  "locationName": "City Clinic"
}
2025-07-12 18:06:23,258 - INFO - Status: 200
2025-07-12 18:06:23,260 - INFO - Duration: 95.47s
2025-07-12 18:06:23,263 - INFO - Response: {"success":false,"found":false,"message":"I couldn't find any available appointments in the next 14 days.","sessionId":"test_comparison_123","available_times":[],"performance_metrics":{"execution_time":93.202433,"total_calls":42,"successful_calls":36,"failed_calls":0,"cache_hits":23,"average_duration":0.0,"rate_limit_delays":0,"success_rate":85.71428571428571}}...
2025-07-12 18:06:23,280 - INFO - 
============================================================
2025-07-12 18:06:23,285 - INFO - TESTING: get-available-practitioners vs enhanced/get-available-practitioners
2025-07-12 18:06:23,291 - INFO - ============================================================
2025-07-12 18:06:23,296 - INFO - Making request to get-available-practitioners (sequential)
2025-07-12 18:06:23,315 - INFO - Endpoint: /get-available-practitioners
2025-07-12 18:06:23,322 - INFO - Payload: {
  "business_id": "1717010852512540252",
  "businessName": "City Clinic",
  "date": "2025-07-13",
  "dialedNumber": "0478621276",
  "sessionId": "test_comparison_123"
}
2025-07-12 18:07:18,443 - INFO - Status: 200
2025-07-12 18:07:18,516 - INFO - Duration: 55.12s
2025-07-12 18:07:18,519 - INFO - Response: {"success":false,"message":"I don't see any available appointments at City Clinic on Sunday, July 13. Would you like me to check another day?","slots":[],"available_times":[],"sessionId":"test_comparison_123"}...
2025-07-12 18:07:18,579 - INFO - Making request to enhanced/get-available-practitioners (parallel)
2025-07-12 18:07:18,631 - INFO - Endpoint: /enhanced/get-available-practitioners
2025-07-12 18:07:18,664 - INFO - Payload: {
  "business_id": "1717010852512540252",
  "businessName": "City Clinic",
  "date": "2025-07-13",
  "dialedNumber": "0478621276",
  "sessionId": "test_comparison_123"
}
2025-07-12 18:07:21,510 - INFO - Status: 200
2025-07-12 18:07:21,528 - INFO - Duration: 2.79s
2025-07-12 18:07:21,529 - INFO - Response: {"success":true,"message":"No practitioners are available at City Clinic on Sunday, July 13, 2025.","sessionId":"test_comparison_123","available_practitioners":[],"date":"Sunday, July 13, 2025","location":"City Clinic","performance_metrics":{"execution_time":0.598262,"total_calls":9,"successful_calls":9,"cache_hits":9,"success_rate":100.0}}...
2025-07-12 18:07:21,532 - INFO - 
============================================================
2025-07-12 18:07:21,564 - INFO - TESTING: availability-checker (sequential only - no parallel version)
2025-07-12 18:07:21,589 - INFO - ============================================================
2025-07-12 18:07:21,594 - INFO - Making request to availability-checker (sequential)
2025-07-12 18:07:21,596 - INFO - Endpoint: /availability-checker
2025-07-12 18:07:21,673 - INFO - Payload: {
  "practitioner": "Brendan Smith",
  "appointmentType": "Acupuncture (Follow up)",
  "date": "2025-07-13",
  "sessionId": "test_comparison_123",
  "dialedNumber": "0478621276",
  "business_id": "1717010852512540252"
}
2025-07-12 18:07:52,320 - INFO - Status: 200
2025-07-12 18:07:52,325 - INFO - Duration: 30.60s
2025-07-12 18:07:52,332 - INFO - Response: {"success":true,"sessionId":"test_comparison_123","available_times":["9:00 AM"],"slots":["9:00 AM"],"practitioner":"Brendan Smith","service":"the requested service","date":"Monday, July 14, 2025","message":"Brendan Smith has an available time on Monday, July 14, 2025 at 9:00 AM."}...
2025-07-12 18:07:52,342 - INFO - 
============================================================
2025-07-12 18:07:52,352 - INFO - COMPARISON SUMMARY
2025-07-12 18:07:52,354 - INFO - ============================================================
2025-07-12 18:07:52,357 - INFO - 
find_next_available:
2025-07-12 18:07:53,259 - INFO - 
get_available_practitioners:
2025-07-12 18:07:53,804 - INFO - 
availability_checker:
2025-07-12 18:07:54,871 - INFO - 
============================================================
2025-07-12 18:07:54,921 - INFO - OVERALL RESULTS
2025-07-12 18:07:54,935 - INFO - ============================================================
2025-07-12 18:07:54,956 - INFO - Successful comparisons: 0/3
2025-07-12 18:07:55,167 - INFO - 
Detailed results saved to: booking_test_logs\parallel_vs_sequential_comparison_20250712_180414.log
