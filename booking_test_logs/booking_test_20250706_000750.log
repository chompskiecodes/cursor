2025-07-06 00:07:50,482 - INFO - Starting webhook booking test - Log file: booking_test_logs\booking_test_20250706_000750.log
2025-07-06 00:07:50,483 - INFO - === Webhook-First Booking Test ===
2025-07-06 00:07:50,483 - INFO - Webhook API: http://localhost:8000
2025-07-06 00:07:50,483 - INFO - Test phone number: 0478621276
2025-07-06 00:07:50,484 - INFO - 
--- Step 1: Check Availability via Webhook (date: 2025-07-07) ---
2025-07-06 00:07:50,484 - INFO - Payload: {
  "practitioner": "Brendan Smith",
  "appointmentType": "Massage",
  "date": "2025-07-07",
  "sessionId": "test_booking_123",
  "dialedNumber": "0478621276"
}
2025-07-06 00:07:54,380 - INFO - Status: 200
2025-07-06 00:07:54,381 - INFO - Response: {"success":true,"sessionId":"test_booking_123","message":"Brendan Smith has the following times available at balmain on Monday, July 07, 2025: 1:00 PM, 4:00 PM","error":null,"practitioner":{"id":"1702104296348198163","name":"Brendan Smith","firstName":"Brendan","servicesCount":0},"date":"Monday, July 07, 2025","slots":[{"date":"Monday, July 07, 2025","time":"1:00 PM","displayTime":"1:00 PM"},{"date":"Monday, July 07, 2025","time":"4:00 PM","displayTime":"4:00 PM"}],"location":{"id":"1717010852512540252","name":"balmain"}}
2025-07-06 00:07:54,383 - INFO - 
--- Step 2: Book Appointment via Webhook ---
2025-07-06 00:07:54,383 - INFO - Booking payload: {
  "action": "book",
  "sessionId": "test_booking_123",
  "dialedNumber": "0478621276",
  "callerPhone": "0412345678",
  "patientName": "Test Patient",
  "patientPhone": "0412345678",
  "practitioner": "Brendan Smith",
  "appointmentType": "Massage",
  "appointmentDate": "2025-07-07",
  "appointmentTime": "1:00 PM",
  "locationId": "1717010852512540252",
  "location": "balmain"
}
2025-07-06 00:08:00,837 - INFO - Status: 200
2025-07-06 00:08:00,838 - INFO - Response: {"success":true,"message":"Perfect! I've successfully booked your Massage appointment with Brendan Smith for Monday, July 07, 2025 at 1:00 PM.","appointmentDetails":{"appointmentId":"1723218736460080245","practitioner":"Brendan Smith","service":"Massage","duration":"60 minutes","date":"Monday, July 07, 2025","time":"1:00 PM","location":"balmain","patient":"Test Patient"},"sessionId":"test_booking_123"}
2025-07-06 00:08:00,852 - INFO - Message: Perfect! I've successfully booked your Massage appointment with Brendan Smith for Monday, July 07, 2025 at 1:00 PM.
2025-07-06 00:08:00,853 - INFO - Appointment Details: {
  "appointmentId": "1723218736460080245",
  "practitioner": "Brendan Smith",
  "service": "Massage",
  "duration": "60 minutes",
  "date": "Monday, July 07, 2025",
  "time": "1:00 PM",
  "location": "balmain",
  "patient": "Test Patient"
}
2025-07-06 00:08:00,861 - INFO - 
Test results saved to: booking_test_logs\booking_test_20250706_000750.log
